<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="utf-8" />
    <title>Short URL App</title>
    <script type="text/javascript">
        (function () {
            fetch('/short/routes.json')
                .then(response => response.json())
                .then(routes => {
                    // 取出當前網址中，最後一個 / 之後的值
                    // 以上面的範例來說，就會取道 short-url 這個值
                    var path = location.pathname.split('/').filter(e => e !== '');
                    var url = routes;
                    for(let i=1; i<path.length; i++){
                        url = url[path[i]];
                    }
                    location.replace(url ? url : '/short/index.html');
                });
        })();
    </script>
</head>

</html>
